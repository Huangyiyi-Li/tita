# Tita æ—¥æŠ¥åˆ†æç³»ç»Ÿ

> åŸºäº AI å¤§æ¨¡å‹çš„é”€å”®æ—¥æŠ¥æ™ºèƒ½åˆ†æå·¥å…·ï¼Œè‡ªåŠ¨ä» Tita å¹³å°çˆ¬å–æ—¥æŠ¥ï¼Œæå–ç»“æ„åŒ–äº‹ä»¶ï¼Œç”Ÿæˆå¯è§†åŒ–ä»ªè¡¨æ¿ã€‚

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
tita-å¸‚åœº/
â”œâ”€â”€ README.md                      # æœ¬æ–‡æ¡£
â”œâ”€â”€ config.json                    # é…ç½®æ–‡ä»¶ï¼ˆAPIå¯†é’¥ã€Cookieç­‰ï¼‰
â”œâ”€â”€ business_knowledge.md          # ä¸šåŠ¡çŸ¥è¯†åº“ï¼ˆäº§å“å®šä¹‰ã€é˜¶æ®µæ ‡å‡†ï¼‰
â”œâ”€â”€ tita_logs.db                   # SQLite æ•°æ®åº“
â”‚
â”œâ”€â”€ *.py (7ä¸ªæ ¸å¿ƒè„šæœ¬)              # æ ¸å¿ƒ Python è„šæœ¬
â”‚
â”œâ”€â”€ å¯åŠ¨å…¥å£/                       # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ start_service.bat          # ä¸»æœåŠ¡ (æ¨è)
â”‚   â””â”€â”€ run_v3.bat                 # v3åˆ†æ (æ ‡ç­¾è‡ªç”Ÿé•¿)
â”‚
â”œâ”€â”€ å·¥å…·è„šæœ¬/                       # è¾…åŠ©å·¥å…·
â”‚   â”œâ”€â”€ cookie_refresher.py        # Cookieæ‰«ç åˆ·æ–°
â”‚   â”œâ”€â”€ cleanup_duplicates.py      # æ¸…ç†é‡å¤æ•°æ®
â”‚   â””â”€â”€ inspect_db.py              # æŸ¥çœ‹æ•°æ®åº“ç»“æ„
â”‚
â”œâ”€â”€ è¾“å‡º/                           # ç”Ÿæˆçš„æ–‡ä»¶
â”‚   â”œâ”€â”€ daily_report_dashboard.html
â”‚   â”œâ”€â”€ quality_dashboard.html
â”‚   â”œâ”€â”€ opportunity_dashboard.html
â”‚   â””â”€â”€ daily_report_*.md
â”‚
â”œâ”€â”€ æ—¥å¿—/                           # è¿è¡Œæ—¥å¿—
â”œâ”€â”€ æ–‡æ¡£/                           # éœ€æ±‚æ–‡æ¡£
â””â”€â”€ å½’æ¡£/                           # è¿‡æ—¶ç‰ˆæœ¬å¤‡ä»½
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install flask apscheduler requests selenium webdriver-manager
```

### 2. é…ç½®
ç¼–è¾‘ `config.json`ï¼š
- `volcengine_api_key`: ç«å±±å¼•æ“ API å¯†é’¥
- `headers.cookie`: Tita ç™»å½• Cookie
- `target_departments`: ç›®æ ‡éƒ¨é—¨ ID

### 3. å¯åŠ¨æœåŠ¡
åŒå‡» **`å¯åŠ¨å…¥å£/start_service.bat`**ï¼Œæµè§ˆå™¨å°†è‡ªåŠ¨æ‰“å¼€ http://localhost:8080

---

## ğŸ“œ æ ¸å¿ƒè„šæœ¬è¯´æ˜

| è„šæœ¬ | åŠŸèƒ½ |
|:-----|:-----|
| `tita_service.py` | **ä¸€ä½“åŒ–æœåŠ¡** - WebæœåŠ¡å™¨ + å®šæ—¶ä»»åŠ¡ + Cookieç®¡ç† |
| `daily_log_aggregator.py` | çˆ¬å– Tita æ—¥æŠ¥ + AI åˆ†æ + å­˜å‚¨æ•°æ®åº“ |
| `generate_dashboard.py` | ç”Ÿæˆå¯è§†åŒ–ä»ªè¡¨æ¿ HTML |
| `extract_events_v3.py` | v3 äº‹ä»¶æŠ½å– - æ”¯æŒåŒè·‘ä¸€è‡´æ€§ã€ç½®ä¿¡åº¦ |
| `promote_tags.py` | æ ‡ç­¾æ™‹å‡ - å°†å€™é€‰æ ‡ç­¾æ™‹å‡ä¸º stable |
| `discover_aliases.py` | åˆ«åå‘ç° - è‡ªåŠ¨å‘ç°å­¦æ ¡/äº§å“åˆ«å |
| `upgrade_schema_v3.py` | v3 æ•°æ®åº“å‡çº§ |

---

## ğŸ”§ å·¥å…·è„šæœ¬è¯´æ˜

| è„šæœ¬ | åŠŸèƒ½ | ä½¿ç”¨æ–¹å¼ |
|:-----|:-----|:-----|
| `cookie_refresher.py` | Selenium æ‰«ç åˆ·æ–° Cookie | `python å·¥å…·è„šæœ¬/cookie_refresher.py` |
| `cleanup_duplicates.py` | æ¸…ç†æ•°æ®åº“é‡å¤äº‹ä»¶ | `python å·¥å…·è„šæœ¬/cleanup_duplicates.py` |
| `inspect_db.py` | æŸ¥çœ‹æ•°æ®åº“è¡¨ç»“æ„ | `python å·¥å…·è„šæœ¬/inspect_db.py` |

---

## ğŸ“Š ä½¿ç”¨æµç¨‹

```mermaid
graph LR
    A[å¯åŠ¨æœåŠ¡] --> B[è‡ªåŠ¨/æ‰‹åŠ¨çˆ¬å–æ—¥æŠ¥]
    B --> C[AI åˆ†ææå–äº‹ä»¶]
    C --> D[å­˜å‚¨åˆ°æ•°æ®åº“]
    D --> E[ç”Ÿæˆä»ªè¡¨æ¿]
    E --> F[æµè§ˆå™¨æŸ¥çœ‹]
```

### æ—¥å¸¸ä½¿ç”¨
1. **åŒå‡» `å¯åŠ¨å…¥å£/start_service.bat`**
2. æµè§ˆå™¨è®¿é—® http://localhost:8080
3. ç‚¹å‡»"æ‰‹åŠ¨æ‹‰å–"è·å–æœ€æ–°æ—¥æŠ¥

### Cookie å¤±æ•ˆæ—¶
- ç³»ç»Ÿä¼šè‡ªåŠ¨å¼¹å‡ºæ‰«ç çª—å£
- æˆ–æ‰‹åŠ¨è¿è¡Œ `python å·¥å…·è„šæœ¬/cookie_refresher.py`

### ä½¿ç”¨ v3 æ ‡ç­¾è‡ªç”Ÿé•¿
1. åŒå‡» `å¯åŠ¨å…¥å£/run_v3.bat`
2. ç³»ç»Ÿä¼šæ‰§è¡ŒåŒè·‘æŠ½å– â†’ æ ‡ç­¾æ™‹å‡ â†’ åˆ«åå‘ç°

---

## âš™ï¸ é…ç½®è¯´æ˜

### config.json ç»“æ„
```json
{
    "tita_api_url": "Tita API åœ°å€",
    "headers": { "cookie": "ç™»å½• Cookie" },
    "volcengine_api_key": "ç«å±±å¼•æ“ API Key",
    "volcengine_endpoint_id": "æ¨¡å‹ Endpoint ID",
    "target_departments": ["éƒ¨é—¨ID"],
    "keepalive": { "enabled": true, "start_hour": 8, "end_hour": 18 }
}
```

### business_knowledge.md
å®šä¹‰äº§å“çº¿ã€é˜¶æ®µæ ‡å‡†ç­‰ä¸šåŠ¡çŸ¥è¯†ï¼ŒAI åˆ†ææ—¶å‚è€ƒã€‚

### Cookie å…±äº«é…ç½®
æœ¬é¡¹ç›®ä¸ `è‡ªåŠ¨å®Œæˆå‘¨æŠ¥` é¡¹ç›®å…±äº« Cookieï¼Œå­˜å‚¨äºï¼š
```
f:\å…±äº«é…ç½®\tita_cookie.json
```
- **æœ¬é¡¹ç›®è´Ÿè´£ Cookie çš„åˆ·æ–°å’Œä¿æ´»**
- åˆ·æ–°åä¼šè‡ªåŠ¨åŒæ­¥åˆ°å…±äº«æ–‡ä»¶ï¼Œå…¶ä»–é¡¹ç›®æ— éœ€æ‰‹åŠ¨æ›´æ–°

---

## ğŸ“ å½’æ¡£è¯´æ˜

`å½’æ¡£/` ç›®å½•åŒ…å«è¿‡æ—¶çš„ v1/v2 ç‰ˆæœ¬æ–‡ä»¶ï¼Œä¿ç•™ä¾›å‚è€ƒï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|:-----|:-----|
| `analyze_opportunities.py` | v1 äº‹ä»¶åˆ†æï¼ˆå·²è¢« v3 å–ä»£ï¼‰ |
| `update_db_schema.py` | v1 æ•°æ®åº“ï¼ˆå·²è¢« v3 å–ä»£ï¼‰ |
| `api_server.py` | ç‹¬ç«‹ API æœåŠ¡ï¼ˆå·²é›†æˆåˆ° tita_serviceï¼‰ |
| `cookie_keeper.py` | ç‹¬ç«‹ä¿æ´»ï¼ˆå·²é›†æˆåˆ° tita_serviceï¼‰ |
| `v2.0_æœºä¼šç®¡ç†ç³»ç»Ÿ/` | v2 ç‰ˆæœ¬å¤‡ä»½ |

---

## ğŸ” å¸¸è§é—®é¢˜

**Q: Cookie å¤±æ•ˆæ€ä¹ˆåŠï¼Ÿ**
- è¿è¡Œ `python å·¥å…·è„šæœ¬/cookie_refresher.py` æ‰«ç åˆ·æ–°

**Q: æ•°æ®åº“æœ‰é‡å¤æ•°æ®ï¼Ÿ**
- è¿è¡Œ `python å·¥å…·è„šæœ¬/cleanup_duplicates.py`

**Q: å¦‚ä½•æŸ¥çœ‹æ•°æ®åº“ç»“æ„ï¼Ÿ**
- è¿è¡Œ `python å·¥å…·è„šæœ¬/inspect_db.py`

---

*æ›´æ–°æ—¶é—´: 2026-01-22*
